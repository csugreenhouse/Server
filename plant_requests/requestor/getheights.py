#find all the heights of the plants in a folder and then return a list of their heights, along with a date and time stamp for each height measurement.

import time
import cv2
import sys
sys.path.append('/srv/samba/Server') 
import plant_requests.height_request.height_request as hr
import plant_requests.utils.reference_tag_util as reference_util
import database.database_util as database_util
import plant_requests.utils.graph_util as graph_util

# remove new lines in this string and make it into a list of file names

# make this into a string

raw_file_name_list = """ 20260115_153135.jpg  20260124_102942.jpg  20260127_150443.jpg  20260130_222256.jpg  20260203_152349.jpg  20260206_113141.jpg  20260207_120902.jpg  20260209_224147.jpg  20260213_105046.jpg
20260115_153516.jpg  20260124_105950.jpg  20260127_153448.jpg  20260130_225301.jpg  20260203_155354.jpg  20260206_113200.jpg  20260207_120923.jpg  20260209_231212.jpg  20260213_112051.jpg
20260115_153612.jpg  20260124_112958.jpg  20260127_160451.jpg  20260130_232306.jpg  20260203_162400.jpg  20260206_113222.jpg  20260207_121009.jpg  20260209_234237.jpg  20260213_115056.jpg
20260115_153628.jpg  20260124_120005.jpg  20260127_163456.jpg  20260130_235311.jpg  20260203_165405.jpg  20260206_113237.jpg  20260207_121106.jpg  20260210_001302.jpg  20260213_122101.jpg
20260115_154114.jpg  20260124_123009.jpg  20260127_170501.jpg  20260131_002316.jpg  20260203_172410.jpg  20260206_113417.jpg  20260207_121226.jpg  20260210_085224.jpg  20260213_125106.jpg
20260115_154219.jpg  20260124_123452.jpg  20260127_173506.jpg  20260131_082603.jpg  20260203_175415.jpg  20260206_113445.jpg  20260207_121308.jpg  20260210_092249.jpg  20260213_132111.jpg
20260115_155021.jpg  20260124_123510.jpg  20260127_180508.jpg  20260131_085608.jpg  20260203_182420.jpg  20260206_113459.jpg  20260207_121345.jpg  20260210_095314.jpg  20260213_135116.jpg
20260115_155141.jpg  20260124_123627.jpg  20260127_183513.jpg  20260131_092613.jpg  20260203_185425.jpg  20260206_113609.jpg  20260207_121409.jpg  20260210_102339.jpg  20260213_142121.jpg
20260115_155658.jpg  20260124_123712.jpg  20260127_190515.jpg  20260131_095618.jpg  20260203_192430.jpg  20260206_113627.jpg  20260207_121449.jpg  20260210_105404.jpg  20260213_145127.jpg
20260115_155708.jpg  20260124_130716.jpg  20260127_193520.jpg  20260131_102623.jpg  20260203_195436.jpg  20260206_113637.jpg  20260207_121540.jpg  20260210_112429.jpg  20260213_152132.jpg
20260115_155712.jpg  20260124_133720.jpg  20260127_200525.jpg  20260131_105628.jpg  20260203_202441.jpg  20260206_113745.jpg  20260207_121625.jpg  20260210_115454.jpg  20260213_155137.jpg
20260115_155730.jpg  20260124_140724.jpg  20260127_203530.jpg  20260131_112633.jpg  20260203_205446.jpg  20260206_113816.jpg  20260207_121653.jpg  20260210_122519.jpg  20260213_162142.jpg
20260115_155740.jpg  20260124_143728.jpg  20260127_210535.jpg  20260131_115638.jpg  20260203_212452.jpg  20260206_113829.jpg  20260207_121832.jpg  20260210_125545.jpg  20260213_165147.jpg
20260115_155744.jpg  20260124_152147.jpg  20260127_213540.jpg  20260131_122643.jpg  20260203_215457.jpg  20260206_113921.jpg  20260207_121842.jpg  20260210_132610.jpg  20260213_172152.jpg
20260115_155831.jpg  20260124_155151.jpg  20260127_220545.jpg  20260131_125648.jpg  20260203_222502.jpg  20260206_114007.jpg  20260207_121913.jpg  20260210_135635.jpg  20260213_175157.jpg
20260115_155840.jpg  20260124_162153.jpg  20260127_223548.jpg  20260131_132653.jpg  20260203_225507.jpg  20260206_114213.jpg  20260207_121945.jpg  20260210_142700.jpg  20260213_182203.jpg
20260115_155902.jpg  20260124_165154.jpg  20260127_230553.jpg  20260131_135658.jpg  20260203_232512.jpg  20260206_114241.jpg  20260207_122003.jpg  20260210_145725.jpg  20260213_185208.jpg
20260115_162904.jpg  20260124_172155.jpg  20260127_233555.jpg  20260131_142703.jpg  20260203_235517.jpg  20260206_114437.jpg  20260207_122413.jpg  20260210_152750.jpg  20260213_192213.jpg
20260117_130315.jpg  20260124_175156.jpg  20260128_000600.jpg  20260131_145708.jpg  20260204_082814.jpg  20260206_114830.jpg  20260207_122439.jpg  20260210_155815.jpg  20260213_195218.jpg
20260117_130407.jpg  20260124_182158.jpg  20260128_083856.jpg  20260131_152713.jpg  20260204_085819.jpg  20260206_114923.jpg  20260207_122559.jpg  20260210_162840.jpg  20260213_202223.jpg
20260121_143938.jpg  20260124_185159.jpg  20260128_090900.jpg  20260131_155718.jpg  20260204_092825.jpg  20260206_114940.jpg  20260207_122655.jpg  20260210_165905.jpg  20260213_205228.jpg
20260121_143955.jpg  20260124_192200.jpg  20260128_093902.jpg  20260131_162723.jpg  20260204_095708.jpg  20260206_115008.jpg  20260207_122757.jpg  20260210_172930.jpg  20260213_212233.jpg
20260121_144148.jpg  20260124_195201.jpg  20260128_100903.jpg  20260131_165728.jpg  20260204_101125.jpg  20260206_115043.jpg  20260207_124057.jpg  20260210_175956.jpg  20260213_215238.jpg
20260121_151153.jpg  20260124_202202.jpg  20260128_103904.jpg  20260131_172733.jpg  20260204_101343.jpg  20260206_115125.jpg  20260207_124625.jpg  20260210_183021.jpg  20260213_222243.jpg
20260121_154158.jpg  20260124_205204.jpg  20260128_110906.jpg  20260131_175734.jpg  20260204_101356.jpg  20260206_115142.jpg  20260207_124712.jpg  20260210_190046.jpg  20260213_225248.jpg
20260121_161203.jpg  20260124_212205.jpg  20260128_113907.jpg  20260131_182739.jpg  20260204_101738.jpg  20260206_115159.jpg  20260207_124826.jpg  20260210_193111.jpg  20260213_232253.jpg
20260121_164208.jpg  20260124_215206.jpg  20260128_120908.jpg  20260131_185744.jpg  20260204_101843.jpg  20260206_115208.jpg  20260207_124948.jpg  20260210_200136.jpg  20260213_235258.jpg
20260121_171213.jpg  20260124_222208.jpg  20260128_123909.jpg  20260131_192746.jpg  20260204_101941.jpg  20260206_115223.jpg  20260207_132013.jpg  20260210_203202.jpg  20260214_002303.jpg
20260121_174218.jpg  20260124_225209.jpg  20260128_130910.jpg  20260131_195749.jpg  20260204_102011.jpg  20260206_115234.jpg  20260207_135038.jpg  20260210_210227.jpg  20260214_082634.jpg
20260121_181223.jpg  20260124_232210.jpg  20260128_133912.jpg  20260131_202751.jpg  20260204_111658.jpg  20260206_115332.jpg  20260207_142103.jpg  20260210_213252.jpg  20260214_085639.jpg
20260121_184228.jpg  20260124_235211.jpg  20260128_140914.jpg  20260131_205756.jpg  20260204_115053.jpg  20260206_115355.jpg  20260207_145128.jpg  20260210_220317.jpg  20260214_092645.jpg
20260121_191233.jpg  20260125_002212.jpg  20260128_143915.jpg  20260131_212759.jpg  20260204_122055.jpg  20260206_115412.jpg  20260207_152153.jpg  20260210_223342.jpg  20260214_095650.jpg
20260121_194238.jpg  20260125_082456.jpg  20260128_150916.jpg  20260131_215801.jpg  20260204_125057.jpg  20260206_115417.jpg  20260207_155218.jpg  20260210_230407.jpg  20260214_102656.jpg
20260121_201243.jpg  20260125_085457.jpg  20260128_153920.jpg  20260131_222806.jpg  20260204_132059.jpg  20260206_115423.jpg  20260207_162244.jpg  20260210_233432.jpg  20260214_105701.jpg
20260121_204248.jpg  20260125_092458.jpg  20260128_160921.jpg  20260131_225808.jpg  20260204_135101.jpg  20260206_115433.jpg  20260207_165309.jpg  20260211_000457.jpg  20260214_112707.jpg
20260121_211253.jpg  20260125_095459.jpg  20260128_163923.jpg  20260131_232813.jpg  20260204_142103.jpg  20260206_115457.jpg  20260207_172334.jpg  20260211_084419.jpg  20260214_115712.jpg
20260121_214258.jpg  20260125_102500.jpg  20260128_170924.jpg  20260131_235818.jpg  20260204_145105.jpg  20260206_115508.jpg  20260207_175359.jpg  20260211_091444.jpg  20260214_122718.jpg
20260121_221302.jpg  20260125_105501.jpg  20260128_173925.jpg  20260201_083116.jpg  20260204_152107.jpg  20260206_115517.jpg  20260207_182424.jpg  20260211_094509.jpg  20260214_125723.jpg
20260121_224307.jpg  20260125_112503.jpg  20260128_180928.jpg  20260201_090121.jpg  20260204_155334.jpg  20260206_115529.jpg  20260207_185449.jpg  20260211_101534.jpg  20260214_132729.jpg
20260121_231312.jpg  20260125_115504.jpg  20260128_183930.jpg  20260201_093124.jpg  20260204_162339.jpg  20260206_115626.jpg  20260207_192514.jpg  20260211_104559.jpg  20260214_135734.jpg
20260121_234317.jpg  20260125_122505.jpg  20260128_190932.jpg  20260201_100129.jpg  20260204_165341.jpg  20260206_120243.jpg  20260207_195539.jpg  20260211_111624.jpg  20260214_142740.jpg
20260122_001322.jpg  20260125_125506.jpg  20260128_193933.jpg  20260201_103131.jpg  20260204_172343.jpg  20260206_120328.jpg  20260207_202604.jpg  20260211_114649.jpg  20260214_145745.jpg
20260122_084619.jpg  20260125_132507.jpg  20260128_200936.jpg  20260201_110133.jpg  20260204_175345.jpg  20260206_124628.jpg  20260207_205629.jpg  20260211_121714.jpg  20260214_152751.jpg
20260122_091624.jpg  20260125_135508.jpg  20260128_203938.jpg  20260201_113134.jpg  20260204_182347.jpg  20260206_124937.jpg  20260207_212654.jpg  20260211_124739.jpg  20260214_155756.jpg
20260122_094629.jpg  20260125_142510.jpg  20260128_210940.jpg  20260201_120135.jpg  20260204_185349.jpg  20260206_125024.jpg  20260207_215719.jpg  20260211_131804.jpg  20260214_162801.jpg
20260122_101633.jpg  20260125_145511.jpg  20260128_213941.jpg  20260201_123137.jpg  20260204_192351.jpg  20260206_125216.jpg  20260207_222744.jpg  20260211_134829.jpg  20260214_165807.jpg
20260122_104638.jpg  20260125_152512.jpg  20260128_220943.jpg  20260201_130140.jpg  20260204_195353.jpg  20260206_125454.jpg  20260207_225809.jpg  20260211_135826.jpg  20260214_172812.jpg
20260122_111643.jpg  20260125_155513.jpg  20260128_223948.jpg  20260201_133142.jpg  20260204_202356.jpg  20260206_125604.jpg  20260207_232834.jpg  20260211_135847.jpg  20260214_175818.jpg
20260122_114648.jpg  20260125_162514.jpg  20260128_230950.jpg  20260201_140143.jpg  20260204_205358.jpg  20260206_125700.jpg  20260207_235859.jpg  20260211_150338.jpg  20260214_182823.jpg
20260122_121653.jpg  20260125_165516.jpg  20260128_233951.jpg  20260201_143145.jpg  20260204_212400.jpg  20260206_132725.jpg  20260208_083821.jpg  20260211_150340.jpg  20260214_185829.jpg
20260122_124658.jpg  20260125_172517.jpg  20260129_000953.jpg  20260201_150149.jpg  20260204_215402.jpg  20260206_135747.jpg  20260208_090846.jpg  20260211_150646.jpg  20260214_192834.jpg
20260122_131703.jpg  20260125_175518.jpg  20260129_084246.jpg  20260201_153153.jpg  20260204_222404.jpg  20260206_142810.jpg  20260208_093911.jpg  20260211_153759.jpg  20260214_195840.jpg
20260122_134708.jpg  20260125_182519.jpg  20260129_091248.jpg  20260201_160200.jpg  20260204_225406.jpg  20260206_145831.jpg  20260208_100936.jpg  20260211_153841.jpg  20260214_202845.jpg
20260122_141713.jpg  20260125_185520.jpg  20260129_094249.jpg  20260201_163202.jpg  20260204_232408.jpg  20260206_150250.jpg  20260208_104001.jpg  20260211_154223.jpg  20260214_205851.jpg
20260122_144718.jpg  20260125_192521.jpg  20260129_101252.jpg  20260201_170204.jpg  20260204_235410.jpg  20260206_150507.jpg  20260208_111026.jpg  20260211_154440.jpg  20260214_212856.jpg
20260122_151723.jpg  20260125_195523.jpg  20260129_104256.jpg  20260201_180214.jpg  20260205_002412.jpg  20260206_150538.jpg  20260208_114051.jpg  20260211_155342.jpg  20260214_215902.jpg
20260122_154728.jpg  20260125_202524.jpg  20260129_111301.jpg  20260201_183219.jpg  20260205_082645.jpg  20260206_150622.jpg  20260208_121116.jpg  20260211_160854.jpg  20260214_222907.jpg
20260122_161733.jpg  20260125_205526.jpg  20260129_114303.jpg  20260201_190224.jpg  20260205_085648.jpg  20260206_151024.jpg  20260208_124141.jpg  20260211_163859.jpg  20260214_225913.jpg
20260122_164738.jpg  20260125_212528.jpg  20260129_121304.jpg  20260201_193227.jpg  20260205_092650.jpg  20260206_151056.jpg  20260208_131206.jpg  20260211_170905.jpg  20260214_232918.jpg
20260122_171743.jpg  20260125_215529.jpg  20260129_124306.jpg  20260201_200228.jpg  20260205_095652.jpg  20260206_151113.jpg  20260208_134231.jpg  20260211_173911.jpg  20260214_235924.jpg
20260122_174748.jpg  20260125_222531.jpg  20260129_131307.jpg  20260201_203235.jpg  20260205_102654.jpg  20260206_153332.jpg  20260208_141255.jpg  20260211_180916.jpg  20260215_083307.jpg
20260122_181753.jpg  20260125_225532.jpg  20260129_134309.jpg  20260201_210239.jpg  20260205_105656.jpg  20260206_164721.jpg  20260208_144320.jpg  20260211_183922.jpg  20260215_090312.jpg
20260122_184758.jpg  20260125_232533.jpg  20260129_141314.jpg  20260201_213244.jpg  20260205_112658.jpg  20260206_164830.jpg  20260208_151345.jpg  20260211_190927.jpg  20260215_093318.jpg
20260122_191803.jpg  20260125_235534.jpg  20260129_144316.jpg  20260201_220246.jpg  20260205_115701.jpg  20260206_164918.jpg  20260208_154410.jpg  20260211_193932.jpg  20260215_100323.jpg
20260122_194808.jpg  20260126_082827.jpg  20260129_151321.jpg  20260201_230259.jpg  20260205_122703.jpg  20260206_165145.jpg  20260208_161435.jpg  20260211_200938.jpg  20260215_103329.jpg
20260122_201813.jpg  20260126_085829.jpg  20260129_154323.jpg  20260201_233305.jpg  20260205_125705.jpg  20260206_165232.jpg  20260208_164500.jpg  20260211_203943.jpg  20260215_110334.jpg
20260122_204818.jpg  20260126_092830.jpg  20260129_161327.jpg  20260202_000310.jpg  20260205_132707.jpg  20260206_165429.jpg  20260208_171525.jpg  20260211_210949.jpg  20260215_113340.jpg
20260122_211823.jpg  20260126_095832.jpg  20260129_164332.jpg  20260202_083607.jpg  20260205_135710.jpg  20260206_165621.jpg  20260208_174550.jpg  20260211_213954.jpg  20260215_120345.jpg
20260122_214827.jpg  20260126_102833.jpg  20260129_171337.jpg  20260202_090611.jpg  20260205_142712.jpg  20260206_165713.jpg  20260208_181615.jpg  20260211_221000.jpg  20260215_123351.jpg
20260122_221832.jpg  20260126_105835.jpg  20260129_174339.jpg  20260202_093613.jpg  20260205_145714.jpg  20260206_165957.jpg  20260208_184640.jpg  20260211_224005.jpg  20260215_130356.jpg
20260122_224837.jpg  20260126_112841.jpg  20260129_181344.jpg  20260202_100615.jpg  20260205_152716.jpg  20260206_170023.jpg  20260208_191705.jpg  20260211_231011.jpg  20260215_133402.jpg
20260122_231842.jpg  20260126_115846.jpg  20260129_184349.jpg  20260202_103620.jpg  20260205_155718.jpg  20260206_170116.jpg  20260208_194730.jpg  20260211_234017.jpg  20260215_140407.jpg
20260122_234847.jpg  20260126_122851.jpg  20260129_191354.jpg  20260202_110622.jpg  20260205_162720.jpg  20260206_170140.jpg  20260208_201755.jpg  20260212_001022.jpg  20260215_143413.jpg
20260123_001852.jpg  20260126_125856.jpg  20260129_194359.jpg  20260202_113625.jpg  20260205_165722.jpg  20260206_173202.jpg  20260208_204820.jpg  20260212_084405.jpg  20260215_150418.jpg
20260123_085150.jpg  20260126_132901.jpg  20260129_201400.jpg  20260202_120626.jpg  20260205_172724.jpg  20260206_180224.jpg  20260208_211845.jpg  20260212_091410.jpg  20260215_153424.jpg
20260123_092155.jpg  20260126_135906.jpg  20260129_204405.jpg  20260202_123631.jpg  20260205_175726.jpg  20260206_183246.jpg  20260208_214909.jpg  20260212_094415.jpg  20260215_160429.jpg
20260123_095200.jpg  20260126_142911.jpg  20260129_211409.jpg  20260202_130636.jpg  20260205_182728.jpg  20260206_190308.jpg  20260208_221934.jpg  20260212_101420.jpg  20260215_163434.jpg
20260123_102205.jpg  20260126_145916.jpg  20260129_214414.jpg  20260202_133641.jpg  20260205_185730.jpg  20260206_193329.jpg  20260208_224959.jpg  20260212_104425.jpg  20260215_170440.jpg
20260123_105210.jpg  20260126_152921.jpg  20260129_221418.jpg  20260202_140643.jpg  20260205_192732.jpg  20260206_200352.jpg  20260208_232024.jpg  20260212_111430.jpg  20260215_173445.jpg
20260123_112215.jpg  20260126_155926.jpg  20260129_224423.jpg  20260202_143644.jpg  20260205_195735.jpg  20260206_203413.jpg  20260208_235049.jpg  20260212_114435.jpg  20260215_180451.jpg
20260123_115220.jpg  20260126_162931.jpg  20260129_231428.jpg  20260202_174126.jpg  20260205_202736.jpg  20260206_210435.jpg  20260209_002114.jpg  20260212_121440.jpg  20260215_183456.jpg
20260123_122225.jpg  20260126_165936.jpg  20260129_234433.jpg  20260202_174227.jpg  20260205_205738.jpg  20260206_213457.jpg  20260209_083003.jpg  20260212_124445.jpg  20260215_190502.jpg
20260123_125240.jpg  20260126_172941.jpg  20260130_001438.jpg  20260202_174841.jpg  20260205_212740.jpg  20260206_220518.jpg  20260209_090028.jpg  20260212_131451.jpg  20260215_193507.jpg
20260123_132248.jpg  20260126_175945.jpg  20260130_084834.jpg  20260202_181843.jpg  20260205_215743.jpg  20260206_223540.jpg  20260209_093053.jpg  20260212_134456.jpg  20260215_200513.jpg
20260123_135256.jpg  20260126_182950.jpg  20260130_091839.jpg  20260202_184848.jpg  20260205_222745.jpg  20260206_230602.jpg  20260209_100118.jpg  20260212_141501.jpg  20260215_203518.jpg
20260123_142304.jpg  20260126_185955.jpg  20260130_094844.jpg  20260202_191853.jpg  20260205_225747.jpg  20260206_233624.jpg  20260209_103143.jpg  20260212_144506.jpg  20260215_210524.jpg
20260123_145311.jpg  20260126_193000.jpg  20260130_101849.jpg  20260202_194858.jpg  20260205_232751.jpg  20260207_000645.jpg  20260209_110208.jpg  20260212_151511.jpg  20260215_213529.jpg
20260123_152319.jpg  20260126_200005.jpg  20260130_112113.jpg  20260202_201903.jpg  20260205_235752.jpg  20260207_084520.jpg  20260209_113233.jpg  20260212_154516.jpg  20260215_220535.jpg
20260123_155327.jpg  20260126_203010.jpg  20260130_115118.jpg  20260202_204908.jpg  20260206_083048.jpg  20260207_091541.jpg  20260209_120258.jpg  20260212_161521.jpg  20260215_223540.jpg
20260123_162331.jpg  20260126_210015.jpg  20260130_122123.jpg  20260202_211913.jpg  20260206_093058.jpg  20260207_094606.jpg  20260209_123323.jpg  20260212_164527.jpg  20260215_230546.jpg
20260123_165335.jpg  20260126_213020.jpg  20260130_125128.jpg  20260202_214919.jpg  20260206_100102.jpg  20260207_101638.jpg  20260209_130347.jpg  20260212_171532.jpg  20260215_233551.jpg
20260123_172343.jpg  20260126_220025.jpg  20260130_132134.jpg  20260202_221924.jpg  20260206_103104.jpg  20260207_104702.jpg  20260209_133412.jpg  20260212_174537.jpg  20260216_000557.jpg
20260123_175351.jpg  20260126_223026.jpg  20260130_135135.jpg  20260202_224929.jpg  20260206_110106.jpg  20260207_111727.jpg  20260209_140437.jpg  20260212_181542.jpg  20260216_083940.jpg
20260123_182359.jpg  20260126_230031.jpg  20260130_142136.jpg  20260202_231934.jpg  20260206_111933.jpg  20260207_113639.jpg  20260209_143502.jpg  20260212_184547.jpg  20260216_090945.jpg
20260123_185407.jpg  20260126_233036.jpg  20260130_145141.jpg  20260202_234939.jpg  20260206_112040.jpg  20260207_113748.jpg  20260209_150527.jpg  20260212_191552.jpg  20260216_093951.jpg
20260123_192415.jpg  20260127_000041.jpg  20260130_152146.jpg  20260203_001944.jpg  20260206_112636.jpg  20260207_114036.jpg  20260209_153559.jpg  20260212_194557.jpg  20260216_100956.jpg
20260123_195422.jpg  20260127_083337.jpg  20260130_155151.jpg  20260203_085242.jpg  20260206_112720.jpg  20260207_114056.jpg  20260209_160624.jpg  20260212_201602.jpg  20260216_104001.jpg
20260123_202430.jpg  20260127_090343.jpg  20260130_162157.jpg  20260203_092247.jpg  20260206_112728.jpg  20260207_114113.jpg  20260209_163649.jpg  20260212_204607.jpg  20260216_111007.jpg
20260123_205438.jpg  20260127_093348.jpg  20260130_165201.jpg  20260203_095252.jpg  20260206_112739.jpg  20260207_114158.jpg  20260209_170714.jpg  20260212_211612.jpg  20260216_114013.jpg
20260123_212446.jpg  20260127_100353.jpg  20260130_172207.jpg  20260203_102258.jpg  20260206_112813.jpg  20260207_115729.jpg  20260209_173739.jpg  20260212_214618.jpg  20260216_121018.jpg
20260123_215454.jpg  20260127_103357.jpg  20260130_175211.jpg  20260203_105303.jpg  20260206_112829.jpg  20260207_115816.jpg  20260209_180804.jpg  20260212_221623.jpg  20260216_124023.jpg
20260123_222502.jpg  20260127_110403.jpg  20260130_182216.jpg  20260203_112308.jpg  20260206_112848.jpg  20260207_120102.jpg  20260209_183829.jpg  20260212_224628.jpg  20260216_131029.jpg
20260123_225510.jpg  20260127_113408.jpg  20260130_185222.jpg  20260203_115313.jpg  20260206_112901.jpg  20260207_120255.jpg  20260209_190853.jpg  20260212_231633.jpg  20260216_134035.jpg
20260123_232517.jpg  20260127_120412.jpg  20260130_192227.jpg  20260203_122319.jpg  20260206_112910.jpg  20260207_120430.jpg  20260209_193918.jpg  20260212_234638.jpg
20260123_235525.jpg  20260127_123417.jpg  20260130_195232.jpg  20260203_125324.jpg  20260206_112942.jpg  20260207_120520.jpg  20260209_200943.jpg  20260213_001643.jpg
20260124_082911.jpg  20260127_130423.jpg  20260130_202237.jpg  20260203_132329.jpg  20260206_112953.jpg  20260207_120625.jpg  20260209_204008.jpg  20260213_085026.jpg
20260124_085918.jpg  20260127_133428.jpg  20260130_205241.jpg  20260203_135334.jpg  20260206_113033.jpg  20260207_120707.jpg  20260209_211033.jpg  20260213_092031.jpg
20260124_092926.jpg  20260127_140433.jpg  20260130_212246.jpg  20260203_142339.jpg  20260206_113058.jpg  20260207_120738.jpg  20260209_214058.jpg  20260213_095036.jpg
20260124_095934.jpg  20260127_143438.jpg  20260130_215251.jpg  20260203_145344.jpg  20260206_113108.jpg  20260207_120827.jpg  20260209_221123.jpg  20260213_102041.jpg
"""




def main():
    main_file_path = "/srv/samba/plants/image/by_plant/plant5/"
    processed_file_path = "/srv/samba/plants/image/by_plant/plant5/processed/"
    conn = database_util.open_connection_to_database()

    # decrease the bounds of the lettuce to make it easier to detect the plant, since the plant is small and the background is noisy.
    # decrease dark bounds to remove the background, and decrease light bounds to remove the noise from the leaves. ((28, 30, 25), (95, 255, 180))
    # decrease dark bounds. was (28, 30, 25), (95, 255, 180) now (20, 20, 20), (95, 255, 180)

    colour_bounds = ((30, 35, 30), (95, 255, 180)) #lettuce
    database_util.set_color_bounds_for_species_in_database(conn, 2, colour_bounds) #lettuce

    camera_parameters = database_util.get_available_camera_parameters_from_database(conn)

    # remove new lines
    raw_file_name_list_no_new_lines = raw_file_name_list.replace("\n", " ")
    file_names = raw_file_name_list_no_new_lines.split(" ")
    file_names = [file_name for file_name in file_names if file_name != ""] # remove empty strings from the list

    for file_name in file_names:
        print(f"Processing file: {file_name}")
        # Open the image file
        file_path = main_file_path + file_name
        image = cv2.imread(file_path)
        reference_tags = reference_util.scan_reference_tags(image, camera_parameters=camera_parameters[0], conn=conn)
        height_response = None
        # ingore wanrings about no plants in image. Still save the processed image with the detected reference tags, and insert a record into the database with the height response as None. This way we can keep track of which images were processed and which ones had issues.
        try:
            height_response = hr.height_request(image, reference_tags, camera_parameters=camera_parameters[0])      
        except Warning as e:
            print(f"Warning processing {file_name}: {e}")
            continue

        print(f"{file_name}: {height_response[0]['estimated_height']} cm")
        # save a processed image 
        processed_file_name = processed_file_path + file_name
        graph_util.plot_height_request_response(image, processed_file_name, height_response)
        print(f"Saved processed image to {processed_file_name}")
        timestamp = file_name.split('.')[0] 
        try: 
            database_util.insert_height_response_into_database(conn, height_response[0], file_path, processed_file_name, timestamp)
        except Exception as e:
            print(f"Error inserting height response for {file_path}: {e}")

    database_util.close_connection_to_database(conn)

main()
